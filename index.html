<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Aptos;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Aptos",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:115%;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=EN-CA style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:16.0pt;font-family:"Calibri",sans-serif;color:#1E4E79'>EtherChain.net
protocol</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>Acronyms</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>MD : Main
Device (Master)</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>SD   :
Secondary Device (Slave)</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>SPE :
Single Pair Ethernet</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>Overview</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>EtherChain
is a Ultra-low latency point to multipoint communication protocol.  It is used
to setup a full duplex Virtual Communications channel from the MD to all the SD
devices over one Single Pair Ethernet (SPE) cable.  The SD (Secondary Device)
devices are connected to the MD (Main Device) in a daisy chain configuration.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Low cost is
the driving factor of EtherChain.  This includes component cost,  CPU
Processing power, Power Consumption and complexity.  Labor is typically the
highest cost in a system.  If the system is so complex that only few people can
understand it then the system cost goes up dramatically.  Therefore simplicity
must be considered before adding features that increase complexity.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>Target
Application</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>EtherChain
has been designed for multiple axis machine control such as 3D printers and
robot arms.  These types of machines require synchronous control of multiple
motors.  Any network delay in these type of machines would cause motion error. 
EtherChain subDevices are time synchronized to the mainDevice to be able to
transfer Step and Direction pulses for stepper motors or servos with minimal
delay and skew.  In order to minimize frame overhead, the traditional ethernet
frame header has been removed with the exception of the Frame Check Sequence
(FCS) for error detection.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>Phy
Interfaces</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>EtherChain
protocol supports Single Pair Ethernet (SPE) 100BaseT1 and 10BaseT1L phy
interfaces.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>100BaseT1
chain link length 15meters</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>10BaseT1L
chain link length 2000meters</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Based on
EtherCat type daisy chain cut through data.  Data looped back at end of chain.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>Serial
over EtherChain</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>I<sup>2</sup>C
is a common interface for sensors and peripherals.  However, the distance of
this interface is limited.  <b>This may not be possible due to the short
turnaround times required for I2C reads.</b></span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>EtherChain
vs Ethernet</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>The difference
between standard Ethernet and EtherChain is that Ethernet connections are made
in a point to point star connection and require a switch or router.  EtherChain
on the other hand is connected in a Daisy Chain fashion and does not require
any switch.  One chain consists of one MD connected to multiple SD's.  Direct
communication between SD's is not possible. </span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>EthterChain
vs EtherCat</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>EtherChain
is a very low latency Protocol similar to EtherCat used in industrial settings
but without the burden of being backwards compatible with other industrial
protocols.  This allows for an inexpensive lightweight and easy to understand
interface.  Unlike EtherCat, EtherChain does not support 3 port devices for
network branching.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>Single
Pair Ethernet</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Since the
SPE interface requires a bridge to connect to a standard Ethernet network, the
Ethernet header can be removed from the SPE network to save bandwidth.  An
EtherChain packet will go to every node thus making the use of MAC addresses
unnecessary.  The EtherChain can be connected to an Ethernet network though a
bridge protocol on the master device which translates the data into standard
Ethernet packets.  However care must be taken that all time critical data is
processed in the Master device in order to maintain the key benefit of
EtherChain which is time synchronization.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Supports
Distributed Clock for synchronizing all the slaves to the master clock.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>OSI runs
at the physical layer.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>EtherCat State
machine: Init, Pre-Op, Safe-op, operational, (bootstrap for upgrades)</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>ESC:
Ethercat Slave Controller</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Master=mainDevice</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Slave=SecondaryDevice
</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'> </span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Packet
Type</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 title=""
 summary="" style='border-collapse:collapse;border:none'>
 <tr>
  <td width=93 valign=top style='width:69.75pt;border:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Packet
  Type</span></p>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Number</span></p>
  </td>
  <td width=82 valign=top style='width:61.85pt;border:solid #A3A3A3 1.0pt;
  border-left:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Description</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:68.4pt;border:solid #A3A3A3 1.0pt;
  border-top:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>0</span></p>
  </td>
  <td width=84 valign=top style='width:63.3pt;border-top:none;border-left:none;
  border-bottom:solid #A3A3A3 1.0pt;border-right:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>IDLE
  packet</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:68.4pt;border:solid #A3A3A3 1.0pt;
  border-top:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1</span></p>
  </td>
  <td width=84 valign=top style='width:63.0pt;border-top:none;border-left:none;
  border-bottom:solid #A3A3A3 1.0pt;border-right:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>INIT
  packet</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:68.4pt;border:solid #A3A3A3 1.0pt;
  border-top:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
  <td width=78 valign=top style='width:58.25pt;border-top:none;border-left:
  none;border-bottom:solid #A3A3A3 1.0pt;border-right:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:68.4pt;border:solid #A3A3A3 1.0pt;
  border-top:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
  <td width=78 valign=top style='width:58.25pt;border-top:none;border-left:
  none;border-bottom:solid #A3A3A3 1.0pt;border-right:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:68.4pt;border:solid #A3A3A3 1.0pt;
  border-top:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
  <td width=78 valign=top style='width:58.25pt;border-top:none;border-left:
  none;border-bottom:solid #A3A3A3 1.0pt;border-right:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:68.4pt;border:solid #A3A3A3 1.0pt;
  border-top:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
  <td width=78 valign=top style='width:58.25pt;border-top:none;border-left:
  none;border-bottom:solid #A3A3A3 1.0pt;border-right:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:68.4pt;border:solid #A3A3A3 1.0pt;
  border-top:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
  <td width=78 valign=top style='width:58.25pt;border-top:none;border-left:
  none;border-bottom:solid #A3A3A3 1.0pt;border-right:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=91 valign=top style='width:68.4pt;border:solid #A3A3A3 1.0pt;
  border-top:none;padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
  <td width=78 valign=top style='width:58.25pt;border-top:none;border-left:
  none;border-bottom:solid #A3A3A3 1.0pt;border-right:solid #A3A3A3 1.0pt;
  padding:4.0pt 4.0pt 4.0pt 4.0pt'>
  <p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
  lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Runs on
IEEE 802.3bw (BroadR-Reach) PHY</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Based on
EtherCat type daisy chain cut through data.  Data looped back at end of chain.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Etherchain
frame:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>7 bytes
Start of Frame: 10101010</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte Start
of Frame Delimiter: 10101011</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte
Packet type</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte
packet sequence number (rollover) used for detecting lost packets</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte hop
number (gets incremented every time the packet is retransmitted to the next
level)</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:27.0pt;line-height:normal'><span lang=EN-US style='font-size:11.0pt;
font-family:"Calibri",sans-serif'>2 bytes datagram address</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:27.0pt;line-height:normal'><span lang=EN-US style='font-size:11.0pt;
font-family:"Calibri",sans-serif'>1 byte  MD datagram length</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:27.0pt;line-height:normal'><span lang=EN-US style='font-size:11.0pt;
font-family:"Calibri",sans-serif'>1 byte  MD write length</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:27.0pt;line-height:normal'><span lang=EN-US style='font-size:11.0pt;
font-family:"Calibri",sans-serif'>1 byte    SD write length</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:0cm;margin-bottom:0cm;
margin-left:27.0pt;line-height:normal'><span lang=EN-US style='font-size:11.0pt;
font-family:"Calibri",sans-serif'>Y bytes of hop X datagram</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>…</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>4 bytes
CRC/FCS frame check</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>12 bytes
Interframe Gap</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>Datagram</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte
type</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Type 01
datagram Write to register</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>  1 byte
address</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>  X bytes
data (address increments)</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Type 02
datagram write to comm fifo</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-family:"Calibri",sans-serif;color:#5B9BD5'>0 IDLE packet
type</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>This
packet does not contain any datagrams.  When a SD receives this packet it must
immediately go to IDLE state.  This is used to determine the number of hops in
the loop.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-family:"Calibri",sans-serif;color:#5B9BD5'>1 INIT packet
type</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>This
packet contains the same datagram format as the Run packet type except that it
is only used for reading and writing initialization registers.  255 bytes of
data which are all set to 0 by the master.  The slaves will then insert their
subDevice ID number into the appropriate byte which corresponds to the hop
number.  If a slave does not have an ID assigned yet it will insert 0.  The
master must then assign it a proper number.  Once the master receives a packet
with all the proper ID's it can go to the next state.  The slave will take note
of its hop number and respond to that hop.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Format:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte
Number of Hops detected by the previous poll</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-family:"Calibri",sans-serif;color:#5B9BD5'>2 RUN packet
type</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>This
packet is used to communicate with individual subDevices.  It is like a virtual
COM port to each subDevice.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Format:</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte SD
interrupt register</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>2 bytes
registers</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte COM
length  //of hop 1</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 to 255
bytes data</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>2 bytes
registers</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 byte COM
length //of hop 2</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>1 to 255
bytes data</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>…</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>Interrupt
Register</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>4 Interrupt
bits (MD writing to these bits will clear them)</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>4 bits COM
request (Request next data packet size X 4)</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>subDevice
bandwidth request.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>When a
subDevice has data to send to the master it will buffer the data in a fifo and
enter the fill level into the appropriate Hop Length field so that the
MainDevice will increase the HopLength in the next frame.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>SD write
request</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>The Read
length is the amount of data in the slave fifo.  If this is larger than the
write length then the amount of data sent is equal to the write length.  The
master will then subtract the read length from the write length and if there is
a remainder (negative) it will increase the datagram size by that amount on the
next frame.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>If the
mainDevice detects an unexpected hop number it immediately switches back to
init state and all subDevices go into init mode.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><b><span
lang=EN-US style='font-size:14.0pt;font-family:"Calibri",sans-serif;color:#2E75B5'>3
Loopback packet type</span></b></p>

<p class=MsoNormal style='margin-bottom:0cm;line-height:normal'><span
lang=EN-US style='font-size:11.0pt;font-family:"Calibri",sans-serif'>This
packet type indicated that it has been looped back by an open port on the last
SD device on the chain.  The FCS will have been recalculated and will not be
monitored or altered by the other SD devices in the chain.  If a master port
encounters this type of packet it will automatically switch ports.</span></p>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
